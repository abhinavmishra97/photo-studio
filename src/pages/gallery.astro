---
import BaseLayout from "../layouts/BaseLayout.astro";
import CTASection from "../components/CTASection.astro";

// Still Photography - 12 images with categories
const stillPhotography = [
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219363/DSC_0991_oiznbv.jpg", category: "Baby Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219656/DSC00272_dcse7a.jpg", category: "Product Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219334/Photo-64_ndnunh.jpg", category: "Wedding Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219337/Photo-83_nng9hq.jpg", category: "Outdoor Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768220095/1D0A7213_v51yx6.jpg", category: "Couple Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219649/DSC00250_dcjhoa.jpg", category: "Product Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219385/Photo-12_cibe2n.jpg", category: "Studio Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768220065/Photo-76_ovrnxf.jpg", category: "Bridal Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219343/Photo-25_biaonr.jpg", category: "Candid Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219382/DSC_1001_vdtdmr.jpg", category: "Baby Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219634/2_ndy8rz.jpg", category: "Studio Portrait" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768219359/Photo-56_ng129s.jpg", category: "Bridal Photography" },
];

// Videography - 4 videos
const videography = [
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306777/Reel_2_1_nhtdwt.mp4",
    category: "Cinematic Wedding Film",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306777/Reel_2_1_nhtdwt.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306781/Teaser----_1_zvby6x.mp4",
    category: "Wedding Teaser",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306781/Teaser----_1_zvby6x.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306778/Tesar_1_c6thnt.mp4",
    category: "Professional Editing",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306778/Tesar_1_c6thnt.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306783/drone_vid_krb095.mov",
    category: "Drone Coverage",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1768306783/drone_vid_krb095.jpg",
  },
];

// Printing Solutions - 12 images
const printingSolutions = [
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309128/WhatsApp_Image_2025-12-28_at_3_04_37_PM-Picsart-AiImageEnhancer_prbeew.png", category: "Large Format Printing" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309144/Canon_TM5300_ncdo3b.jpg", category: "Photo Prints" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309114/WhatsApp_Image_2025-12-28_at_3.04.36_PM_r2bkmo.jpg", category: "Canvas Prints" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309137/EpSON_P8000_gxj5e0.jpg", category: "Poster Printing" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309134/Canon_TM_5300_kspa5s.webp", category: "Banner Printing" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309141/cameo_5_isfmcy.jpg", category: "Silhoutte printer" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768309148/Canon_TM5300_1_uo8dba.jpg", category: "Canon L36" },
];

// Gift Items - 12 images
const giftItems = [
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308543/customised-gift-items_caksjd.jpg", category: "Sublimation Gifts" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308523/GL19113_1-Picsart-AiImageEnhancer_qbbnuh.png", category: "Photo Cushions" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308541/Unique-gifts-Home-decor-gift-ideas-A-polyresin-lamp-featuring-a-tree-and-deer-printed-pattern-1024x585_1_qdxtdj.webp", category: "LED Items" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308531/3up-winter-drinkware-oct2024-dsk-880x586_jhx6gx.jpg", category: "Magic Cups" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308498/il_570xN.2993883512_bt4r_nql5yh.webp", category: "Photo Frames" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308546/customised-gift-items_kjg01e.jpg", category: "Personalized Gifts" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308490/oye-personalized-temprature-water-bottle_qztjx5.jpg", category: "Custom Prints" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308502/3D-Engraved-Crystal_x9u05z.jpg", category: "Custom Photo Gifts" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308492/62c8482a69604_jft3-_oli7ll.webp", category: "Memory Gifts" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308534/best-gifts-for-wife_ffbois.jpg", category: "Photo Calendars" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308496/heartsnapshotmixphotoart_pflsao.webp", category: "Decorative Items" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768308555/020-3-options-for-installing-led_iwtnbm.jpg", category: "LED Walls" },
];

// Baby Photoshoot - 12 images
const babyPhotoshoot = [
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414328/3-months-Baby-Photoshoot-Amrit-Ammu-Photography-Thane-Mumbai-1_1_phmoyo.webp", category: "Newborn Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414336/DSC_1001_1_ipkugr.jpg", category: "Baby Milestone" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414344/8x12---_2_hr2wx8.jpg", category: "Infant Portraits" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414373/DSC_0981_1_fpp6z6.jpg", category: "Baby Studio Session" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414361/1D0A8260_1_olpcva.jpg", category: "Cute Baby Moments" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414349/8x12---_1_wtlqsz.jpg", category: "Baby Props Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414372/DSC_1007_1_hr5apq.jpg", category: "Family with Baby" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414340/DSC_0991_1_xrgfze.jpg", category: "Baby Portraits" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414367/1D0A2148_mwe4pv.jpg", category: "Baby Photoshoot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414334/5x7-_2_f3glwb.jpg", category: "Studio Session" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414357/1D0A8271_yplet2.jpg", category: "Baby Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414339/baby_photographer_in_Pune_066937_1_njvfbw.jpg", category: "Infant Studio" },
];

// Matrimonial Photoshoot - 8 images
const matrimonialPhotoshoot = [
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414302/001_copy_ga0blj.jpg", category: "Matrimonial Profile" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414319/DSC_9705_zlztup.jpg", category: "Bio-Data Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414313/03_copy_hiei3u.jpg", category: "Studio Session" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414305/DSC_1077_1_j4stpt.jpg", category: "Professional Headshot" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414286/04_copy_alghgq.jpg", category: "Formal Studio" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414318/002_copy_kdnzua.jpg", category: "Marriage Photography" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414280/2_1_qduxlv.jpg", category: "Elegant Bridal Portrait" },
  { src: "https://res.cloudinary.com/djrs9oqz7/image/upload/v1768414296/01_copy_nedpcy.jpg", category: "Classic Studio Shot" },
]; 
---

<BaseLayout>
  <!-- Content -->
  <div class="relative overflow-x-hidden overflow-y-visible">
    <!-- Hero Section -->
    <section class="relative text-center space-y-2 md:space-y-4 mb-4 pt-16">
      <!-- Watermark Logo -->
      <div
        class="absolute left-1/2 -translate-x-1/2 top-0 pointer-events-none"
      >
        <img
          src="https://res.cloudinary.com/djrs9oqz7/image/upload/v1767454388/cropped_circle_image_1_npm0nr.png"
          alt="Ram Photo Studio Watermark"
          class="w-48 h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 opacity-[0.20] object-contain"
        />
      </div>

      <!-- Hero content -->
      <div class="relative z-10">
        <p class="uppercase tracking-[0.3em] text-sm text-[#D97706]">
          Our Work
        </p>
        <h1 class="text-3xl md:text-4xl font-semibold">Gallery</h1>
        <p class="text-[#1a1a1a] dark:text-[#CDC3B7] max-w-3xl mx-auto">
          Explore our portfolio showcasing stunning photography, cinematic
          videography, premium printing solutions, and personalized gift items.
        </p>
      </div>
    </section>

    <!-- Still Photography Section -->
    <section class="mb-16 mt-16" id="still">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Still Photography
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Capturing timeless moments with precision and artistry
        </p>
      </div>
      <div class="slider-container" data-slider="still">
        <div class="slider-track">
          {
            stillPhotography.concat(stillPhotography).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Baby Photoshoot Section -->
    <section class="mb-16" id="baby">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Baby Photoshoot
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Specialized setup for newborns and infants
        </p>
      </div>
      <div class="slider-container" data-slider="baby">
        <div class="slider-track">
          {
            babyPhotoshoot.concat(babyPhotoshoot).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Matrimonial Photoshoot Section -->
    <section class="mb-16" id="matrimonial">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Matrimonial Photoshoot
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Clean, confident, and approachable portraits
        </p>
      </div>
      <div class="slider-container" data-slider="matrimonial">
        <div class="slider-track">
          {
            matrimonialPhotoshoot.concat(matrimonialPhotoshoot).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Videography Section -->
    <section class="mb-16" id="video">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Videography
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Cinematic storytelling that brings your memories to life
        </p>
      </div>
      <div class="slider-container" data-slider="video">
        <div class="slider-track">
          {
            videography.concat(videography).map((item) => (
              <div class="slider-item video-item">
                <video poster={item.poster} loop playsinline>
                  <source src={item.src} type="video/mp4" />
                </video>
                <!-- Play/Pause button overlay -->
                <div class="play-button-overlay">
                  <svg class="play-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="64" height="64">
                    <circle cx="12" cy="12" r="11" fill="rgba(0,0,0,0.6)" stroke="white" stroke-width="1"/>
                    <path d="M9.5 8.5l7 3.5-7 3.5z"/>
                  </svg>
                  <svg class="pause-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="64" height="64" style="display: none;">
                    <circle cx="12" cy="12" r="11" fill="rgba(0,0,0,0.6)" stroke="white" stroke-width="1"/>
                    <rect x="9" y="8" width="2" height="8" fill="white"/>
                    <rect x="13" y="8" width="2" height="8" fill="white"/>
                  </svg>
                </div>
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Printing Solutions Section -->
    <section class="mb-16" id="printing">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Printing Solutions
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Professional printing services for all your needs
        </p>
      </div>
      <div class="slider-container" data-slider="printing">
        <div class="slider-track">
          {
            printingSolutions.concat(printingSolutions).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Gift Items Section -->
    <section class="mb-16" id="gifts">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Gift Items
        </h2>
        <p class="text-[#f97316] text-lg font-bold">
          Personalized gifts that celebrate your special moments
        </p>
      </div>
      <div class="slider-container" data-slider="gifts">
        <div class="slider-track">
          {
            giftItems.concat(giftItems).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>
  </div>

  <!-- CTA Section -->
  <CTASection />
</BaseLayout>

<style>
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Add scroll padding to account for navbar height */
  section[id] {
    scroll-margin-top: 130px;
  }

  .slider-container {
    overflow-x: hidden; /* Hide horizontal overflow from animation */
    overflow-y: visible; /* Allow vertical expansion for hover */
    position: relative;
    width: 100%;
    padding: 3rem 0; /* Vertical padding to reserve space for hover expansion */
  }

  .slider-track {
    display: flex;
    gap: 1rem;
    animation: scroll 40s linear infinite;
    animation-play-state: paused; /* Paused by default */
    will-change: transform;
  }

  /* Start animation after page loads */
  .slider-track.animate {
    animation-play-state: running;
  }

  .slider-track:hover {
    animation-play-state: paused;
  }

  .slider-item {
    flex: 0 0 auto;
    width: 300px;
    height: 400px;
    position: relative;
    border-radius: 0.75rem;
    overflow: visible; /* Allow hover expansion */
    cursor: pointer;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transform-style: preserve-3d;
    perspective: 1000px;
    transform-origin: center center; /* Scale from center */
    z-index: 1; /* Base z-index for stacking */
  }

  /* Video items use landscape aspect ratio (16:9) */
  .slider-item.video-item {
    width: 560px;
    height: 315px;
  }

  /* When the user hovers over the track, add a VERY subtle blur to others */
  .slider-track:hover .slider-item {
    filter: blur(2px) opacity(0.8);
    transform: scale(0.98);
  }

  /* The active item pops out cleanly - translate FIRST, then scale */
  .slider-item:hover {
    filter: none !important;
    opacity: 1 !important;
    transform: translateY(-20px) scale(1.1) !important; /* Translate first, then scale */
    z-index: 50; /* Raise above all other items */
    box-shadow:
      0 20px 40px -10px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .slider-item img,
  .slider-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 0.75rem;
  }

  .slider-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.3s ease;
    display: flex;
    align-items: flex-end;
    padding: 1.5rem;
    border-radius: 0.75rem;
  }

  .slider-item:hover .slider-overlay {
    opacity: 1;
  }

  .slider-category {
    color: white;
    font-size: 1.125rem;
    font-weight: 600;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  /* Play button overlay for videos */
  .play-button-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: auto;
    z-index: 10;
    transition: all 0.3s ease;
    cursor: pointer;
  }

  .play-button-overlay:hover {
    transform: translate(-50%, -50%) scale(1.1);
  }

  /* Hide play/pause button when video is playing and not hovering */
  .video-item.playing .play-button-overlay {
    opacity: 0;
  }

  .video-item.playing:hover .play-button-overlay {
    opacity: 1;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-300px * 12 - 12rem));
    }
  }

  /* Video specific styles */
  .video-item video {
    pointer-events: none;
  }

  .slider-item:hover video {
    pointer-events: auto;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .slider-container {
      padding: 2rem 0; /* Adjust padding for mobile */
    }

    .slider-item {
      width: 250px;
      height: 350px;
    }

    .slider-item:hover {
      transform: translateY(-15px) scale(1.08) !important; /* Slightly less expansion on mobile */
    }

    @keyframes scroll {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(calc(-250px * 12 - 12rem));
      }
    }
  }
</style>

<script>
  // Play/Pause video on button click
  document.querySelectorAll(".video-item").forEach((item) => {
    const video = item.querySelector("video");
    const playButton = item.querySelector(".play-button-overlay");
    const playIcon = item.querySelector(".play-icon") as HTMLElement;
    const pauseIcon = item.querySelector(".pause-icon") as HTMLElement;
    
    // Find the parent slider track
    const sliderTrack = item.closest(".slider-track") as HTMLElement;

    if (!video || !playButton || !playIcon || !pauseIcon || !sliderTrack) return;

    // Handle play/pause button click
    playButton.addEventListener("click", (e) => {
      e.stopPropagation();
      
      if (video.paused) {
        video.play();
        item.classList.add("playing");
        playIcon.style.display = "none";
        pauseIcon.style.display = "block";
        // Pause the slider animation
        sliderTrack.style.animationPlayState = "paused";
      } else {
        video.pause();
        item.classList.remove("playing");
        playIcon.style.display = "block";
        pauseIcon.style.display = "none";
        // Resume the slider animation
        sliderTrack.style.animationPlayState = "running";
      }
    });

    // Reset to paused state when video ends
    video.addEventListener("ended", () => {
      item.classList.remove("playing");
      playIcon.style.display = "block";
      pauseIcon.style.display = "none";
      video.currentTime = 0;
      // Resume the slider animation when video ends
      sliderTrack.style.animationPlayState = "running";
    });
  });

  // Handle hash navigation for anchor scrolling
  function handleHashNavigation() {
    const hash = window.location.hash;
    if (hash) {
      // Longer delay to let the page render completely when coming from another page
      setTimeout(() => {
        const target = document.querySelector(hash);
        if (target) {
          const navbarHeight = 130;
          const elementPosition = target.getBoundingClientRect().top + window.pageYOffset;
          const offsetPosition = elementPosition - navbarHeight;

          window.scrollTo({
            top: offsetPosition,
            behavior: 'smooth'
          });
        }
      }, 300); // Increased delay for cross-page navigation
    }
  }

  // Handle hash on DOM ready (before images load)
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', handleHashNavigation);
  } else {
    handleHashNavigation();
  }

  // Handle hash on page load (after everything loads)
  window.addEventListener('load', () => {
    handleHashNavigation();
  });

  // Handle hash changes (when clicking links)
  window.addEventListener('hashchange', () => {
    handleHashNavigation();
  });

  // Start slider animations after page load and layout is stable
  function startSliderAnimations() {
    // Wait longer for any anchor scrolling to complete
    requestAnimationFrame(() => {
      setTimeout(() => {
        // Add 'animate' class to all slider tracks to start animations
        document.querySelectorAll('.slider-track').forEach(track => {
          track.classList.add('animate');
        });
      }, 1500); // Increased delay to 1.5 seconds to ensure scrolling completes
    });
  }

  // Start animations after page is fully loaded
  if (document.readyState === 'complete') {
    startSliderAnimations();
  } else {
    window.addEventListener('load', startSliderAnimations);
  }
</script>
