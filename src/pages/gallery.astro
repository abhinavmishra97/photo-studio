---
import BaseLayout from "../layouts/BaseLayout.astro";

// 20 gallery images optimized for 4-column masonry grid
const galleryImages = [
  {
    src: "/images/gallery/gallery-1.JPG",
    alt: "Wedding couple portrait",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-2.webp",
    alt: "led wall",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-3.JPG",
    alt: "Wedding ceremony",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-4.JPG",
    alt: "Wedding rings",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-5.JPG",
    alt: "Couple outdoor",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-6.JPG",
    alt: "Portrait session",
    span: "row-span-2",
    position: "80% center",
  },
  {
    src: "/images/gallery/gallery-7.JPG",
    alt: "Family portrait",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-8.JPG",
    alt: "Wedding bouquet",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-9.JPG",
    alt: "Couple dancing",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-10.JPG",
    alt: "Wedding venue",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-11.jpg",
    alt: "Baby portrait",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-12.JPG",
    alt: "Studio portrait",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-13.jpg",
    alt: "Wedding celebration",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-14.jpg",
    alt: "Product photography",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-15.JPG",
    alt: "Couple sunset",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-16.JPG",
    alt: "Bridal makeup",
    span: "row-span-2",
  },
  {
    src: "/images/gallery/gallery-17.JPG",
    alt: "Wedding reception",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-18.JPG",
    alt: "Engagement rings",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-19.webp",
    alt: "Romantic moment",
    span: "row-span-1",
  },
  {
    src: "/images/gallery/gallery-20.webp",
    alt: "Beautiful portrait",
    span: "row-span-1",
  },
];
---

<BaseLayout>
  <!-- Header Section -->
  <section class="text-center space-y-3 md:space-y-4">
    <p
      class="uppercase tracking-widest text-xs text-[#D97706] font-semibold"
    >
      Portfolio
    </p>
    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white">
      Gallery Highlights
    </h1>
    <p class="text-gray-600 dark:text-gray-300 max-w-3xl mx-auto">
      A curated look at recent weddings, portraits, product shoots, and
      keepsakes. Click any image to view it in full size.
    </p>
  </section>

  <!-- Masonry Grid Gallery -->
  <section class="mt-10">
    <div
      class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-[200px]"
    >
      {
        galleryImages.map((image, index) => (
          <div
            class={`group relative overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-800 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer ${image.span}`}
            data-gallery-item
            data-image-src={image.src}
            data-image-alt={image.alt}
          >
            <!-- Loading Skeleton -->
            <div class="absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 dark:from-gray-700 dark:via-gray-600 dark:to-gray-700 animate-pulse gallery-skeleton">
              <div class="absolute inset-0 flex items-center justify-center">
                <svg class="w-16 h-16 animate-spin drop-shadow-lg" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-20" cx="12" cy="12" r="10" stroke="url(#gradient1)" stroke-width="1.5"></circle>
                  <path class="opacity-90" stroke="url(#gradient2)" stroke-width="1.5" stroke-linecap="round" d="M4 12a8 8 0 018-8"></path>
                  <defs>
                    <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="100%">
                      <stop offset="0%" style="stop-color:#20C997;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="0%">
                      <stop offset="0%" style="stop-color:#20C997;stop-opacity:1" />
                      <stop offset="50%" style="stop-color:#10A37F;stop-opacity:1" />
                      <stop offset="100%" style="stop-color:#D97706;stop-opacity:1" />
                    </linearGradient>
                  </defs>
                </svg>
              </div>
            </div>
            
            <!-- Actual Image -->
            <img
              src={image.src}
              alt={image.alt}
              loading="lazy"
              class="gallery-image w-full h-full object-cover transition-all duration-700 ease-out group-hover:scale-105 opacity-0"
              style={
                image.position
                  ? `object-position: ${image.position}`
                  : undefined
              }
              onload="this.classList.remove('opacity-0'); this.classList.add('opacity-100'); this.previousElementSibling.style.display='none';"
            />
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-300 flex items-center justify-center">
              <svg
                class="w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-75 group-hover:scale-100"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"
                ></path>
              </svg>
            </div>
          </div>
        ))
      }
    </div>
  </section>

  <!-- Lightbox Modal -->
  <div
    id="lightbox"
    class="fixed inset-0 bg-black/90 z-50 hidden items-center justify-center p-4 backdrop-blur-sm"
  >
    <button
      id="closeLightbox"
      class="absolute top-4 right-4 text-white hover:text-gray-300 transition z-10"
      aria-label="Close lightbox"
    >
      <svg
        class="w-10 h-10"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </button>

    <div
      id="lightboxContent"
      class="relative max-w-4xl max-h-[80vh] w-full opacity-0 scale-95 transition-all duration-300"
    >
      <img
        id="lightboxImage"
        src=""
        alt=""
        class="w-full h-full object-contain rounded-lg shadow-2xl max-h-[80vh]"
      />
    </div>
  </div>

  <!-- CTA Section -->
  <section
    class="mt-16 mb-6
      flex flex-col md:flex-row items-center justify-between
      gap-4 md:gap-6
      p-6 md:p-8 rounded-2xl
      bg-[#E8D5B5]
      border-2 border-[#E8D5B5]
      text-[#1a1a1a] shadow-lg"
  >
    <div>
      <p class="uppercase tracking-[0.25em] text-sm text-[#6B5744] font-semibold">
        Plan your shoot
      </p>
      <h3 class="text-2xl md:text-3xl font-semibold">
        Want a full album for a specific shoot?
      </h3>
      <p class="text-[#1a1a1a] mt-2">
        Tell us what you're looking for—weddings, portraits, products, or
        events—and we'll share a tailored set.
      </p>
    </div>
    <div class="flex gap-3">
      <a
        href="tel:+919412000718"
        class="inline-flex items-center gap-2 px-5 py-3 rounded-full
          bg-gradient-to-r from-[#20C997] to-[#10A37F] text-white font-semibold
          hover:from-[#10A37F] hover:to-[#0D8F6E]
          hover:scale-105 hover:shadow-[0_0_25px_rgba(32,201,151,0.6)]
          transition-all duration-300 shadow-lg"
      >
        Call now
      </a>
      <a
        href="/contact"
        class="inline-flex items-center gap-2 px-5 py-3 rounded-full
          bg-gradient-to-r from-[#C9954D] to-[#B8894E] text-white font-semibold
          hover:scale-105 hover:shadow-lg
          transition-all duration-300"
      >
        Plan your shoot
      </a>
    </div>
  </section>

  <!-- Lightbox Script -->
  <script is:inline>
    document.addEventListener("DOMContentLoaded", () => {
      const lightbox = document.getElementById("lightbox");
      const lightboxImage = document.getElementById("lightboxImage");
      const lightboxContent = document.getElementById("lightboxContent");
      const closeLightboxBtn = document.getElementById("closeLightbox");
      const galleryItems = document.querySelectorAll("[data-gallery-item]");

      // Open lightbox
      galleryItems.forEach((item) => {
        item.addEventListener("click", () => {
          const imageSrc = item.dataset.imageSrc;
          const imageAlt = item.dataset.imageAlt;

          lightboxImage.src = imageSrc;
          lightboxImage.alt = imageAlt;

          lightbox.classList.remove("hidden");
          lightbox.classList.add("flex");

          // Trigger animation
          setTimeout(() => {
            lightboxContent.classList.remove("opacity-0", "scale-95");
            lightboxContent.classList.add("opacity-100", "scale-100");
          }, 10);
        });
      });

      // Close lightbox function
      const closeLightbox = () => {
        lightboxContent.classList.remove("opacity-100", "scale-100");
        lightboxContent.classList.add("opacity-0", "scale-95");

        setTimeout(() => {
          lightbox.classList.add("hidden");
          lightbox.classList.remove("flex");
        }, 300);
      };

      // Close on button click
      closeLightboxBtn.addEventListener("click", closeLightbox);

      // Close on background click
      lightbox.addEventListener("click", (e) => {
        if (e.target === lightbox) {
          closeLightbox();
        }
      });

      // Close on Escape key
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && !lightbox.classList.contains("hidden")) {
          closeLightbox();
        }
      });
    });
  </script>
</BaseLayout>
