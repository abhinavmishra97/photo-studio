---
import BaseLayout from "../layouts/BaseLayout.astro";

// Still Photography - 12 images with categories
const stillPhotography = [
  { src: "/images/gallery/gallery-1.JPG", category: "Matrimonial Photoshoot" },
  { src: "/images/gallery/gallery-3.JPG", category: "Wedding Photography" },
  { src: "/images/gallery/gallery-4.JPG", category: "Outdoor Photography" },
  { src: "/images/gallery/gallery-5.JPG", category: "Couple Photoshoot" },
  { src: "/images/gallery/gallery-6.JPG", category: "Studio Portrait" },
  { src: "/images/gallery/gallery-8.JPG", category: "Wedding Details" },
  { src: "/images/gallery/gallery-9.JPG", category: "Candid Photography" },
  { src: "/images/gallery/gallery-11.jpg", category: "Baby Photoshoot" },
  { src: "/images/gallery/gallery-12.JPG", category: "Studio Photography" },
  { src: "/images/gallery/gallery-15.JPG", category: "Outdoor Portrait" },
  { src: "/images/gallery/gallery-16.JPG", category: "Bridal Photography" },
  { src: "/images/gallery/gallery-18.JPG", category: "Product Photography" },
];

// Videography - 4 videos
const videography = [
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767391248/cinematic_wedding_films_hjwrrn.mp4",
    category: "Cinematic Wedding Film",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767391248/cinematic_wedding_films_hjwrrn.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767390259/teaser_1080P_mcrbor.mp4",
    category: "Wedding Teaser",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767390259/teaser_1080P_mcrbor.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767391757/Mani_singh_-_RamPhotoStudioHathras_1080p_h264_online-video-cutter.com_ziprbn.mp4",
    category: "Professional Editing",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767391757/Mani_singh_-_RamPhotoStudioHathras_1080p_h264_online-video-cutter.com_ziprbn.jpg",
  },
  {
    src: "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767390272/DJI_0013_1_1_c4kmj7.mp4",
    category: "Drone Coverage",
    poster:
      "https://res.cloudinary.com/djrs9oqz7/video/upload/v1767390272/DJI_0013_1_1_c4kmj7.jpg",
  },
];

// Printing Solutions - 12 images
const printingSolutions = [
  { src: "/images/gallery/gallery-14.jpg", category: "Large Format Printing" },
  { src: "/images/gallery/gallery-7.JPG", category: "Photo Prints" },
  { src: "/images/gallery/gallery-10.JPG", category: "Canvas Prints" },
  { src: "/images/gallery/gallery-13.jpg", category: "Poster Printing" },
  { src: "/images/gallery/gallery-17.JPG", category: "Banner Printing" },
  { src: "/images/gallery/gallery-19.webp", category: "Photo Albums" },
  { src: "/images/gallery/gallery-20.webp", category: "Framed Prints" },
  { src: "/images/gallery/gallery-1.JPG", category: "Wall Art" },
  { src: "/images/gallery/gallery-2.webp", category: "LED Wall Display" },
  { src: "/images/gallery/gallery-4.JPG", category: "Custom Prints" },
  { src: "/images/gallery/gallery-6.JPG", category: "Professional Prints" },
  { src: "/images/gallery/gallery-8.JPG", category: "High Quality Prints" },
];

// Gift Items - 12 images
const giftItems = [
  { src: "/images/gifts/sublimation1.jpg", category: "Sublimation Gifts" },
  { src: "/images/gifts/cushion1.jpg", category: "Photo Cushions" },
  { src: "/images/gifts/leditem1.webp", category: "LED Items" },
  { src: "/images/gifts/magiccup1.jpg", category: "Magic Cups" },
  { src: "/images/gallery/gallery-11.jpg", category: "Photo Frames" },
  { src: "/images/gallery/gallery-12.JPG", category: "Personalized Gifts" },
  { src: "/images/gallery/gallery-13.jpg", category: "Custom Mugs" },
  { src: "/images/gallery/gallery-14.jpg", category: "Photo Keychains" },
  { src: "/images/gallery/gallery-15.JPG", category: "Memory Boxes" },
  { src: "/images/gallery/gallery-16.JPG", category: "Photo Calendars" },
  { src: "/images/gallery/gallery-17.JPG", category: "Decorative Items" },
  { src: "/images/gallery/gallery-18.JPG", category: "Gift Hampers" },
];
---

<BaseLayout>
  <!-- Content -->
  <div class="relative overflow-x-hidden overflow-y-visible">
    <!-- Hero Section -->
    <section class="relative text-center space-y-2 md:space-y-4 mb-4 pt-16">
      <!-- Watermark Logo -->
      <div
        class="absolute left-1/2 -translate-x-1/2 top-0 pointer-events-none"
      >
        <img
          src="/rps-favicon.png"
          alt="Ram Photo Studio Watermark"
          class="w-48 h-48 md:w-56 md:h-56 lg:w-64 lg:h-64 opacity-[0.20] object-contain"
        />
      </div>

      <!-- Hero content -->
      <div class="relative z-10">
        <p class="uppercase tracking-[0.3em] text-sm text-[#D97706]">
          Our Work
        </p>
        <h1 class="text-3xl md:text-4xl font-semibold">Gallery</h1>
        <p class="text-[#5A5246] dark:text-[#CDC3B7] max-w-3xl mx-auto">
          Explore our portfolio showcasing stunning photography, cinematic
          videography, premium printing solutions, and personalized gift items.
        </p>
      </div>
    </section>

    <!-- Still Photography Section -->
    <section class="mb-16" id="still-photography">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Still Photography
        </h2>
        <p
          class="text-[#F59E0B] text-lg font-semibold"
          style="text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5);"
        >
          Capturing timeless moments with precision and artistry
        </p>
      </div>
      <div class="slider-container" data-slider="still">
        <div class="slider-track">
          {
            stillPhotography.concat(stillPhotography).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Videography Section -->
    <section class="mb-16" id="videography">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Videography
        </h2>
        <p
          class="text-[#F59E0B] text-lg font-semibold"
          style="text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5);"
        >
          Cinematic storytelling that brings your memories to life
        </p>
      </div>
      <div class="slider-container" data-slider="video">
        <div class="slider-track">
          {
            videography.concat(videography).map((item) => (
              <div class="slider-item video-item">
                <video poster={item.poster} muted loop playsinline>
                  <source src={item.src} type="video/mp4" />
                </video>
                <!-- Play button overlay -->
                <div class="play-button-overlay">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="64" height="64">
                    <circle cx="12" cy="12" r="11" fill="rgba(0,0,0,0.6)" stroke="white" stroke-width="1"/>
                    <path d="M9.5 8.5l7 3.5-7 3.5z"/>
                  </svg>
                </div>
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Printing Solutions Section -->
    <section class="mb-16" id="printing-solutions">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Printing Solutions
        </h2>
        <p
          class="text-[#F59E0B] text-lg font-semibold"
          style="text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5);"
        >
          Professional printing services for all your needs
        </p>
      </div>
      <div class="slider-container" data-slider="printing">
        <div class="slider-track">
          {
            printingSolutions.concat(printingSolutions).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Gift Items Section -->
    <section class="mb-16" id="gifts">
      <div class="mb-6">
        <h2
          class="text-2xl md:text-3xl font-bold text-[#1a1a1a] dark:text-white mb-2"
        >
          Gift Items
        </h2>
        <p
          class="text-[#F59E0B] text-lg font-semibold"
          style="text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.5);"
        >
          Personalized gifts that celebrate your special moments
        </p>
      </div>
      <div class="slider-container" data-slider="gifts">
        <div class="slider-track">
          {
            giftItems.concat(giftItems).map((item) => (
              <div class="slider-item">
                <img src={item.src} alt={item.category} />
                <div class="slider-overlay">
                  <span class="slider-category">{item.category}</span>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </section>
  </div>
</BaseLayout>

<style>
  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
  }

  /* Add scroll padding to account for navbar height */
  section[id] {
    scroll-margin-top: 100px;
  }

  .slider-container {
    overflow: visible;
    position: relative;
    width: 100%;
    padding: 1rem 0;
  }

  .slider-track {
    display: flex;
    gap: 1rem;
    animation: scroll 40s linear infinite;
    will-change: transform;
  }

  .slider-track:hover {
    animation-play-state: paused;
  }

  .slider-item {
    flex: 0 0 auto;
    width: 300px;
    height: 400px;
    position: relative;
    border-radius: 0.75rem;
    overflow: visible;
    cursor: pointer;
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    transform-style: preserve-3d;
    perspective: 1000px;
  }

  /* Video items use landscape aspect ratio (16:9) */
  .slider-item.video-item {
    width: 560px;
    height: 315px;
  }

  /* When the user hovers over the track, add a VERY subtle blur to others */
  .slider-track:hover .slider-item {
    filter: blur(2px) opacity(0.8);
    transform: scale(0.98);
  }

  /* The active item pops out cleanly without being too dramatic */
  .slider-item:hover {
    filter: none !important;
    opacity: 1 !important;
    transform: scale(1.1) translateY(-10px) !important;
    z-index: 50;
    box-shadow:
      0 20px 40px -10px rgba(0, 0, 0, 0.4),
      0 0 0 1px rgba(255, 255, 255, 0.2);
  }

  .slider-item img,
  .slider-item video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    border-radius: 0.75rem;
  }

  .slider-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.3s ease;
    display: flex;
    align-items: flex-end;
    padding: 1.5rem;
    border-radius: 0.75rem;
  }

  .slider-item:hover .slider-overlay {
    opacity: 1;
  }

  .slider-category {
    color: white;
    font-size: 1.125rem;
    font-weight: 600;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  /* Play button overlay for videos */
  .play-button-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    pointer-events: none;
    z-index: 10;
    transition: opacity 0.3s ease;
  }

  /* Hide play button on hover */
  .video-item:hover .play-button-overlay {
    opacity: 0;
  }

  @keyframes scroll {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(calc(-300px * 12 - 12rem));
    }
  }

  /* Video specific styles */
  .video-item video {
    pointer-events: none;
  }

  .slider-item:hover video {
    pointer-events: auto;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .slider-item {
      width: 250px;
      height: 350px;
    }

    @keyframes scroll {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(calc(-250px * 12 - 12rem));
      }
    }
  }
</style>

<script>
  // Play video on hover
  document.querySelectorAll(".video-item").forEach((item) => {
    const video = item.querySelector("video");

    item.addEventListener("mouseenter", () => {
      if (video) video.play();
    });

    item.addEventListener("mouseleave", () => {
      if (video) {
        video.pause();
        video.currentTime = 0;
        video.load(); // Reload to show poster again
      }
    });
  });

  // Handle anchor link scrolling with offset
  function scrollToSection() {
    const hash = window.location.hash;
    if (hash) {
      const target = document.querySelector(hash);
      if (target) {
        // Wait for page to load
        setTimeout(() => {
          const navbarHeight = 80; // Adjust based on your navbar height
          const elementPosition = target.getBoundingClientRect().top;
          const offsetPosition =
            elementPosition + window.pageYOffset - navbarHeight;

          window.scrollTo({
            top: offsetPosition,
            behavior: "smooth",
          });
        }, 100);
      }
    }
  }

  // Scroll on page load
  window.addEventListener("load", scrollToSection);

  // Scroll when hash changes (for same-page navigation)
  window.addEventListener("hashchange", scrollToSection);
</script>
